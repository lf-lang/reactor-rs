<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The context in which a reaction executes. Its API allows mutating the event queue of the scheduler. Only the interactions declared at assembly time are allowed."><title>ReactionCtx in reactor_rt - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="reactor_rt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../reactor_rt/index.html">reactor_rt</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">ReactionCtx</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.get">get</a></li><li><a href="#method.get_elapsed_logical_time">get_elapsed_logical_time</a></li><li><a href="#method.get_elapsed_physical_time">get_elapsed_physical_time</a></li><li><a href="#method.get_logical_time">get_logical_time</a></li><li><a href="#method.get_physical_time">get_physical_time</a></li><li><a href="#method.get_ref">get_ref</a></li><li><a href="#method.get_start_time">get_start_time</a></li><li><a href="#method.get_tag">get_tag</a></li><li><a href="#method.is_present">is_present</a></li><li><a href="#method.is_shutdown">is_shutdown</a></li><li><a href="#method.num_workers">num_workers</a></li><li><a href="#method.request_stop">request_stop</a></li><li><a href="#method.schedule">schedule</a></li><li><a href="#method.schedule_with_v">schedule_with_v</a></li><li><a href="#method.set">set</a></li><li><a href="#method.set_opt">set_opt</a></li><li><a href="#method.spawn_physical_thread">spawn_physical_thread</a></li><li><a href="#method.use_ref">use_ref</a></li><li><a href="#method.use_ref_opt">use_ref_opt</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-RefUnwindSafe-for-ReactionCtx%3C'a,+'x%3E">RefUnwindSafe</a></li><li><a href="#impl-Send-for-ReactionCtx%3C'a,+'x%3E">Send</a></li><li><a href="#impl-Sync-for-ReactionCtx%3C'a,+'x%3E">Sync</a></li><li><a href="#impl-Unpin-for-ReactionCtx%3C'a,+'x%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-ReactionCtx%3C'a,+'x%3E">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In crate reactor_rt</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../reactor_rt/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="index.html">reactor_rt</a>::<wbr><a class="struct" href="#">ReactionCtx</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/reactor_rt/scheduler/context.rs.html#24-52">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct ReactionCtx&lt;'a, 'x&gt; { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The context in which a reaction executes. Its API
allows mutating the event queue of the scheduler.
Only the interactions declared at assembly time
are allowed.</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-ReactionCtx%3C'a,+'x%3E" class="impl"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#54-558">source</a><a href="#impl-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.get_start_time" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#59-61">source</a><h4 class="code-header">pub fn <a href="#method.get_start_time" class="fn">get_start_time</a>(&amp;self) -&gt; <a class="struct" href="struct.Instant.html" title="struct reactor_rt::Instant">Instant</a></h4></section></summary><div class="docblock"><p>Returns the start time of the execution of this program.</p>
<p>This is a logical instant with microstep zero.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_physical_time" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#69-71">source</a><h4 class="code-header">pub fn <a href="#method.get_physical_time" class="fn">get_physical_time</a>(&amp;self) -&gt; <a class="struct" href="struct.Instant.html" title="struct reactor_rt::Instant">Instant</a></h4></section></summary><div class="docblock"><p>Returns the current physical time.</p>
<p>Repeated invocation of this method may produce different
values, although <a href="struct.Instant.html" title="struct reactor_rt::Instant">Instant</a> is monotonic. The
physical time is necessarily greater than the logical time.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_logical_time" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#79-81">source</a><h4 class="code-header">pub fn <a href="#method.get_logical_time" class="fn">get_logical_time</a>(&amp;self) -&gt; <a class="struct" href="struct.Instant.html" title="struct reactor_rt::Instant">Instant</a></h4></section></summary><div class="docblock"><p>Returns the current logical time.</p>
<p>Logical time is frozen during the execution of a reaction.
Repeated invocation of this method will always produce
the same value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_tag" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#88-90">source</a><h4 class="code-header">pub fn <a href="#method.get_tag" class="fn">get_tag</a>(&amp;self) -&gt; <a class="struct" href="struct.EventTag.html" title="struct reactor_rt::EventTag">EventTag</a></h4></section></summary><div class="docblock"><p>Returns the tag at which the reaction executes.</p>
<p>Repeated invocation of this method will always produce
the same value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_shutdown" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#100-102">source</a><h4 class="code-header">pub fn <a href="#method.is_shutdown" class="fn">is_shutdown</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns whether this tag is the shutdown tag of the
application. If so, it’s necessarily the very last
invocation of the current reaction (on a given reactor
instance).</p>
<p>Repeated invocation of this method will always produce
the same value.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_elapsed_logical_time" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#108-110">source</a><h4 class="code-header">pub fn <a href="#method.get_elapsed_logical_time" class="fn">get_elapsed_logical_time</a>(&amp;self) -&gt; <a class="struct" href="struct.Duration.html" title="struct reactor_rt::Duration">Duration</a></h4></section></summary><div class="docblock"><p>Returns the amount of logical time elapsed since the
start of the program. This does not take microsteps
into account.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_elapsed_physical_time" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#118-120">source</a><h4 class="code-header">pub fn <a href="#method.get_elapsed_physical_time" class="fn">get_elapsed_physical_time</a>(&amp;self) -&gt; <a class="struct" href="struct.Duration.html" title="struct reactor_rt::Duration">Duration</a></h4></section></summary><div class="docblock"><p>Returns the amount of physical time elapsed since the
start of the program.</p>
<p>Since this uses <a href="struct.ReactionCtx.html#method.get_physical_time" title="method reactor_rt::ReactionCtx::get_physical_time">Self::get_physical_time</a>, be aware that
this function’s result may change over time.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.num_workers" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#131-139">source</a><h4 class="code-header">pub fn <a href="#method.num_workers" class="fn">num_workers</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the number of active workers in the execution of
a reactor program.</p>
<p>Return values:</p>
<ul>
<li><code>1</code> if threading is not enabled.</li>
<li>If threading is enabled and a number of workers was specified,
it returns that number.</li>
<li>And if the number of workers was left unspecified,
the return value might vary.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#161-163">source</a><h4 class="code-header">pub fn <a href="#method.get" class="fn">get</a>&lt;T: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>&gt;(&amp;self, container: &amp;impl <a class="trait" href="trait.ReactionTrigger.html" title="trait reactor_rt::ReactionTrigger">ReactionTrigger</a>&lt;T&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>Returns the current value of a port or action at this
logical time. If the value is absent, <a href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None">Option::None</a> is
returned.  This is the case if the action or port is
not present (<a href="struct.ReactionCtx.html#method.is_present" title="method reactor_rt::ReactionCtx::is_present">Self::is_present</a>), or if no value was
scheduled (action values are optional, see <a href="struct.ReactionCtx.html#method.schedule_with_v" title="method reactor_rt::ReactionCtx::schedule_with_v">Self::schedule_with_v</a>).</p>
<p>The value is copied out. See also <a href="struct.ReactionCtx.html#method.use_ref" title="method reactor_rt::ReactionCtx::use_ref">Self::use_ref</a> if this
is to be avoided.</p>
<h6 id="examples"><a href="#examples">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">if let </span><span class="prelude-val">Some</span>(value) = ctx.get(port) {
    <span class="comment">// branch is taken if the port is set
</span>}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_ref" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#187-189">source</a><h4 class="code-header">pub fn <a href="#method.get_ref" class="fn">get_ref</a>&lt;'q, T&gt;(
    &amp;self,
    container: &amp;'q impl ReactionTriggerWithRefAccess&lt;T&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.reference.html">&amp;'q T</a>&gt;</h4></section></summary><div class="docblock"><p>Returns a reference to the current value of a port or action at this
logical time. If the value is absent, <a href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None">Option::None</a> is
returned.  This is the case if the action or port is
not present (<a href="struct.ReactionCtx.html#method.is_present" title="method reactor_rt::ReactionCtx::is_present">Self::is_present</a>), or if no value was
scheduled (action values are optional, see <a href="struct.ReactionCtx.html#method.schedule_with_v" title="method reactor_rt::ReactionCtx::schedule_with_v">Self::schedule_with_v</a>).</p>
<p>This does not require the value to be Copy, however, the implementation
of this method currently may require unsafe code. The method is therefore
not offered when compiling with the <code>no-unsafe</code> feature.</p>
<h6 id="examples-1"><a href="#examples-1">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">if let </span><span class="prelude-val">Some</span>(value) = ctx.get_ref(port) {
    <span class="comment">// value is a ref to the internal value
</span>}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.use_ref" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#217-221">source</a><h4 class="code-header">pub fn <a href="#method.use_ref" class="fn">use_ref</a>&lt;T, O&gt;(
    &amp;self,
    container: &amp;impl <a class="trait" href="trait.ReactionTrigger.html" title="trait reactor_rt::ReactionTrigger">ReactionTrigger</a>&lt;T&gt;,
    action: impl <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.reference.html">&amp;T</a>&gt;) -&gt; O
) -&gt; O</h4></section></summary><div class="docblock"><p>Executes the provided closure on the value of the port
or action. The value is fetched by reference and not
copied.</p>
<h6 id="examples-2"><a href="#examples-2">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>len = ctx.use_ref(port, |str| str.map(String::len).unwrap_or(<span class="number">0</span>));
<span class="comment">// equivalent to
</span><span class="kw">let </span>len = ctx.use_ref_opt(port, String::len).unwrap_or(<span class="number">0</span>);</code></pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="kw">if let </span><span class="prelude-val">Some</span>(str) = ctx.use_ref_opt(port, Clone::clone) {
    <span class="comment">// only entered if the port value is present, so no need to check is_present
</span>}</code></pre></div>
<p>See also the similar <a href="struct.ReactionCtx.html#method.use_ref_opt" title="method reactor_rt::ReactionCtx::use_ref_opt">Self::use_ref_opt</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.use_ref_opt" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#228-230">source</a><h4 class="code-header">pub fn <a href="#method.use_ref_opt" class="fn">use_ref_opt</a>&lt;T, O&gt;(
    &amp;self,
    container: &amp;impl <a class="trait" href="trait.ReactionTrigger.html" title="trait reactor_rt::ReactionTrigger">ReactionTrigger</a>&lt;T&gt;,
    action: impl <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.reference.html">&amp;T</a>) -&gt; O
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;O&gt;</h4></section></summary><div class="docblock"><p>Executes the provided closure on the value of the port,
only if it is present. The value is fetched by reference
and not copied.</p>
<p>See also the similar <a href="struct.ReactionCtx.html#method.use_ref" title="method reactor_rt::ReactionCtx::use_ref">Self::use_ref</a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#239-248">source</a><h4 class="code-header">pub fn <a href="#method.set" class="fn">set</a>&lt;T&gt;(&amp;mut self, port: &amp;mut <a class="struct" href="struct.Port.html" title="struct reactor_rt::Port">Port</a>&lt;T&gt;, value: T)<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,</div></h4></section></summary><div class="docblock"><p>Sets the value of the given port.</p>
<p>The change is visible at the same logical time, i.e.
the value propagates immediately. This may hence
schedule more reactions that should execute at the
same logical time.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_opt" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#302-309">source</a><h4 class="code-header">pub fn <a href="#method.set_opt" class="fn">set_opt</a>&lt;T&gt;(&amp;mut self, port: &amp;mut <a class="struct" href="struct.Port.html" title="struct reactor_rt::Port">Port</a>&lt;T&gt;, value: <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;T&gt;)<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,</div></h4></section></summary><div class="docblock"><p>Sets the value of the given port, if the given value is <code>Some</code>.
Otherwise the port is not set and no reactions are triggered.</p>
<p>The change is visible at the same logical time, i.e.
the value propagates immediately. This may hence
schedule more reactions that should execute at the
same logical time.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
ctx.set_opt(sink, ctx.get(source));
<span class="comment">// equivalent to
</span><span class="kw">if let </span><span class="prelude-val">Some</span>(value) = ctx.get(source) {
    ctx.set(sink, value);
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_present" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#316-318">source</a><h4 class="code-header">pub fn <a href="#method.is_present" class="fn">is_present</a>&lt;T&gt;(&amp;self, action: &amp;impl <a class="trait" href="trait.ReactionTrigger.html" title="trait reactor_rt::ReactionTrigger">ReactionTrigger</a>&lt;T&gt;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns true if the given action was triggered at the
current logical time.</p>
<p>If so, then it may, but must not, present a value (<a href="struct.ReactionCtx.html#method.get" title="method reactor_rt::ReactionCtx::get">Self::get</a>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.schedule" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#340-342">source</a><h4 class="code-header">pub fn <a href="#method.schedule" class="fn">schedule</a>&lt;T: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;(
    &amp;mut self,
    action: &amp;mut impl <a class="trait" href="trait.SchedulableAsAction.html" title="trait reactor_rt::SchedulableAsAction">SchedulableAsAction</a>&lt;T&gt;,
    offset: <a class="enum" href="enum.Offset.html" title="enum reactor_rt::Offset">Offset</a>
)</h4></section></summary><div class="docblock"><p>Schedule an action to trigger at some point in the future.
The action will trigger after its own implicit time delay,
plus an optional additional time delay (see <a href="enum.Offset.html" title="enum reactor_rt::Offset">Offset</a>). This
delay is added to the current logical (resp. physical) time
for logical (resp. physical) actions.</p>
<p>This is like <a href="struct.ReactionCtx.html#method.schedule_with_v" title="method reactor_rt::ReactionCtx::schedule_with_v">Self::schedule_with_v</a>, where the value is <a href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None">None</a>.</p>
<h6 id="examples-3"><a href="#examples-3">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>ctx.schedule(action, Asap);         <span class="comment">// will be executed one microstep from now (+ own delay)
</span>ctx.schedule(action, <span class="macro">after!</span>(<span class="number">2 </span>ms)); <span class="comment">// will be executed 2 milliseconds from now (+ own delay)
</span>ctx.schedule(action, After(<span class="macro">delay!</span>(<span class="number">2 </span>ms)));             <span class="comment">// equivalent to the previous
</span>ctx.schedule(action, After(Duration::from_millis(<span class="number">2</span>))); <span class="comment">// equivalent to the previous</span></code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.schedule_with_v" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#372-374">source</a><h4 class="code-header">pub fn <a href="#method.schedule_with_v" class="fn">schedule_with_v</a>&lt;T: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;(
    &amp;mut self,
    action: &amp;mut impl <a class="trait" href="trait.SchedulableAsAction.html" title="trait reactor_rt::SchedulableAsAction">SchedulableAsAction</a>&lt;T&gt;,
    value: <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;T&gt;,
    offset: <a class="enum" href="enum.Offset.html" title="enum reactor_rt::Offset">Offset</a>
)</h4></section></summary><div class="docblock"><p>Schedule an action to trigger at some point in the future,</p>
<p>The action will carry the given value at the time it
is triggered, unless it is overwritten by another call
to this method. The value can be cleared by using <code>None</code>
as a value. Note that even if the value is absent, the
<em>action</em> will still be present at the time it is triggered
(see <a href="struct.ReactionCtx.html#method.is_present" title="method reactor_rt::ReactionCtx::is_present">Self::is_present</a>).</p>
<p>The action will trigger after its own implicit time delay,
plus an optional additional time delay (see <a href="enum.Offset.html" title="enum reactor_rt::Offset">Offset</a>). This
delay is added to the current logical (resp. physical) time
for logical (resp. physical) actions.</p>
<h6 id="examples-4"><a href="#examples-4">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// will be executed 2 milliseconds (+ own delay) from now with that value.
</span>ctx.schedule_with_v(action, <span class="prelude-val">Some</span>(<span class="string">"value"</span>), <span class="macro">after!</span>(<span class="number">2 </span>msec));
<span class="comment">// will be executed one microstep from now, with no value
</span>ctx.schedule_with_v(action, <span class="prelude-val">None</span>, Asap);
<span class="comment">// that's equivalent to
</span>ctx.schedule(action, Asap);</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.spawn_physical_thread" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#431-446">source</a><h4 class="code-header">pub fn <a href="#method.spawn_physical_thread" class="fn">spawn_physical_thread</a>&lt;F, R&gt;(&amp;mut self, f: F) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.76.0/std/thread/struct.JoinHandle.html" title="struct std::thread::JoinHandle">JoinHandle</a>&lt;R&gt;<div class="where">where
    F: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.AsyncCtx.html" title="struct reactor_rt::AsyncCtx">AsyncCtx</a>) -&gt; R + <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    R: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,</div></h4></section></summary><div class="docblock"><p>Spawn a new thread that can use a <a href="struct.AsyncCtx.html" title="struct reactor_rt::AsyncCtx">AsyncCtx</a>
to push asynchronous events to the reaction queue. This is
only useful with <a href="struct.PhysicalAction.html" title="struct reactor_rt::PhysicalAction">physical actions</a>.</p>
<p>Since the thread is allowed to keep references into the
internals of the scheduler, it is joined when the scheduler
shuts down. This means the scheduler will wait for the
thread to finish its task. For that reason, the thread’s
closure should not execute an infinite loop, it should at
least check that the scheduler has not been terminated by
polling <a href="struct.AsyncCtx.html#method.was_terminated" title="method reactor_rt::AsyncCtx::was_terminated">AsyncCtx::was_terminated</a>.</p>
<h6 id="example"><a href="#example">Example</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">fn </span>some_reaction(ctx: <span class="kw-2">&amp;mut </span>ReactionCtx, phys_action: <span class="kw-2">&amp;</span>PhysicalActionRef&lt;u32&gt;) {
    <span class="kw">let </span>phys_action = phys_action.clone(); <span class="comment">// clone to move it into other thread
    </span>ctx.spawn_physical_thread(<span class="kw">move </span>|link| {
        std::thread::sleep(Duration::from_millis(<span class="number">200</span>));
        <span class="comment">// This will push an event whose tag is the
        // current physical time at the point of this
        // statement.
        </span>link.schedule_physical_with_v(<span class="kw-2">&amp;</span>phys_action, <span class="prelude-val">Some</span>(<span class="number">123</span>), Asap).unwrap();
    });
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.request_stop" class="method"><a class="src rightside" href="../src/reactor_rt/scheduler/context.rs.html#466-471">source</a><h4 class="code-header">pub fn <a href="#method.request_stop" class="fn">request_stop</a>(&amp;mut self, offset: <a class="enum" href="enum.Offset.html" title="enum reactor_rt::Offset">Offset</a>)</h4></section></summary><div class="docblock"><p>Request that the application shutdown, possibly with
a particular offset. Just like for actions, even a zero
offset will only trigger the special <code>shutdown</code> trigger
at the earliest one microstep after the current tag.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// trigger shutdown on the next microstep
</span>ctx.request_stop(Asap);

<span class="comment">// trigger shutdown in *at most* 1 msec (in logical time).
// If in the meantime, another `request_stop` call schedules
// shutdown for an earlier tag, that one will be honored instead.
</span>ctx.request_stop(<span class="macro">after!</span>(<span class="number">1 </span>msec));</code></pre></div>
</div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-ReactionCtx%3C'a,+'x%3E" class="impl"><a href="#impl-RefUnwindSafe-for-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section><section id="impl-Send-for-ReactionCtx%3C'a,+'x%3E" class="impl"><a href="#impl-Send-for-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section><section id="impl-Sync-for-ReactionCtx%3C'a,+'x%3E" class="impl"><a href="#impl-Sync-for-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section><section id="impl-Unpin-for-ReactionCtx%3C'a,+'x%3E" class="impl"><a href="#impl-Unpin-for-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section><section id="impl-UnwindSafe-for-ReactionCtx%3C'a,+'x%3E" class="impl"><a href="#impl-UnwindSafe-for-ReactionCtx%3C'a,+'x%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, 'x&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.ReactionCtx.html" title="struct reactor_rt::ReactionCtx">ReactionCtx</a>&lt;'a, 'x&gt;</h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/any.rs.html#140">source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/any.rs.html#141">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.76.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.76.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.76.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.76.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.76.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#763">source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#766">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#747-749">source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#756">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#803-805">source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#810">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#788-790">source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.76.0/src/core/convert/mod.rs.html#795">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.76.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.76.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>